(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{237:function(t,s,e){"use strict";e.r(s);var r=e(352),i=e(284);for(var a in i)"default"!==a&&function(t){e.d(s,t,function(){return i[t]})}(a);e(328);var n=e(67),o=Object(n.a)(i.default,r.a,r.b,!1,null,"a469fbf0",null);o.options.__file="src/page/order/order-detail.vue",s.default=o.exports},242:function(t,s,e){"use strict";e.r(s);var r=e(243),i=e.n(r);for(var a in r)"default"!==a&&function(t){e.d(s,t,function(){return r[t]})}(a);s.default=i.a},243:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default={data:function(){return{}},props:{order:{type:Object,default:{}}},methods:{}}},244:function(t,s,e){},247:function(t,s){t.exports="../../static/img/order-status-70@3x.3419e66.png"},284:function(t,s,e){"use strict";e.r(s);var r=e(285),i=e.n(r);for(var a in r)"default"!==a&&function(t){e.d(s,t,function(){return r[t]})}(a);s.default=i.a},285:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=d(e(68)),i=d(e(225)),a=e(97),n=e(98),o=d(e(286));function d(t){return t&&t.__esModule?t:{default:t}}s.default={data:function(){return{isIphoneX:!1,order:{},refund_mark:"0",payType:["货到付款","支付宝支付","微信支付"]}},components:{consultHistory:o.default},created:function(){this.$toast.loading({message:"加载中..."})},mounted:function(){this.order_sn=this.$route.query.order_sn||"",this.refund_mark=this.$route.query.refund_mark||"",this.wechat_pay=this.$route.query.wechat_pay||"",console.log(this.$route),clearInterval(this.interval),this.interval=null,this.getOrderDetail(),this.addEvents()},computed:{userInfo:function(){return lib.storage.get("user")}},methods:(0,i.default)({},(0,n.mapMutations)({setOrderInfo:"SAVE_ORDER_INFO"}),{addEvents:function(){var t=this;this.wechat_pay&&this.$dialog.alert({title:"提示",message:"已完成支付？",showCancelButton:!1}).then(function(){t.getOrderDetail()})},clickOrderItem:function(t){this.$router.push({path:"detail",query:{item_id:t.order_item_list[0].item_id_alias}})},clickCancelRefund:function(){var t=this;this.$dialog.alert({title:"提示",message:"确认取消维权吗？",showCancelButton:!0}).then(function(){t.cancelRefundOrder(t.order.id)})},clickCheckRefund:function(){this.$router.push({path:"/refund-order-detail",query:{order_sn:this.order.order_sn}})},cancelRefundOrder:function(t){var s=this;a.Api.cancelRefundOrder({order_id:t}).then(function(){s.getOrderDetail(),s.$toast({message:"取消维权成功"})}).catch(function(t){s.$toast({message:t.msg})})},clickRefund:function(){var t={order_status:this.order.order_status,order_item_id:this.order.order_item_list[0].id,refundPrice:this.order.total_amount,delivery_fee:this.order.delivery_fee};1==this.order.order_item_list[0].delivery_mark&&(t.refundPrice-=this.order.delivery_fee),this.$router.push({path:"refund-status",query:t})},clickLogistics:function(t){var s=t.id;this.$router.push({path:"logistics",query:{orderId:s}})},clickReceipt:function(t){var s=this;this.$dialog.alert({title:"提示",message:"是否继续操作？",showCancelButton:!0}).then(function(){s.tradeOrderReceipt(t)})},tradeOrderReceipt:function(t){var s=this,e=t.id,i=[String(e)];a.Api.tradeOrderReceipt({order_id_list:(0,r.default)(i)}).then(function(t){console.log(t),s.$toast({message:"确认收货成功"}),s.getOrderDetail()}).catch(function(t){console.log(t),s.$toast({message:t.msg})})},clickCancelOrder:function(t){var s=this;this.$dialog.alert({title:"提示",message:"确定取消该订单？",showCancelButton:!0}).then(function(){s.cancelOrder(t)})},cancelOrder:function(t){var s=this;a.Api.cancelOrder({id:t}).then(function(){s.getOrderDetail(),s.$toast({message:"取消订单成功"})}).catch(function(t){t&&50007!==t.code&&(console.log(t),s.$toast({message:t.msg}))})},clickOrderPay:function(t){this.getPayUrl(t)},getPayUrl:function(t){var s=this,e=this;a.Api.wapPaymentUrl({order_id:t,pay_type:e.order.pay_type}).then(function(t){e.isPayUrl=!0,2==e.order.pay_type?$("body").html(t.data.params.request_form):location.href=t.data.pay_url}).catch(function(t){s.$toast({duration:1e3,message:t.msg})})},getOrderDetail:function(){var t=this;a.Api.getOrderDetail({order_sn:this.order_sn}).then(function(s){t.$toast.clear(),t.order=s.data.user_order,t.setOrderInfo(t.order)}).catch(function(s){t.$toast({message:s.msg})})}})}},286:function(t,s,e){"use strict";e.r(s);var r=e(303),i=e(242);for(var a in i)"default"!==a&&function(t){e.d(s,t,function(){return i[t]})}(a);e(287);var n=e(67),o=Object(n.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="src/components/consult-history.vue",s.default=o.exports},287:function(t,s,e){"use strict";var r=e(244);e.n(r).a},288:function(t,s,e){},303:function(t,s,e){"use strict";var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"consult-history"},[e("div",{staticClass:"title"},[t._v("协商记录")]),t._v(" "),e("div",{staticClass:"item-list"},t._l(t.order.service_logs,function(s,r){return e("div",{staticClass:"item"},[e("div",{staticClass:"txt"},[e("div",{staticClass:"refund-title"},[t._v(t._s(s.remark))]),t._v(" "),10===s.service_status||8===s.service_status?e("div",{staticClass:"refund-desc"},[t._v(t._s(s.desc))]):t._e(),t._v(" "),s.reason?e("div",{staticClass:"word-wrap"},[t._v("拒绝理由："+t._s(s.reason))]):t._e()]),t._v(" "),e("span",{staticClass:"date"},[t._v(t._s(s.gmt_created))])])}))])])},i=[];r._withStripped=!0,e.d(s,"a",function(){return r}),e.d(s,"b",function(){return i})},309:function(t,s){t.exports="../../static/img/order-status-refund-defeate@3x.2998bae.png"},310:function(t,s){t.exports="../../static/img/order-status-50@3x.782509f.png"},327:function(t,s){t.exports="../../static/img/address-black@3x.a77b6de.png"},328:function(t,s,e){"use strict";var r=e(288);e.n(r).a},352:function(t,s,e){"use strict";var r=function(){var t=this,s=t.$createElement,r=t._self._c||s;return t.order.order_item_list&&t.order.order_item_list.length?r("div",[r("div",{staticClass:"page-wrapper order-detail-wrapper"},[10==t.order.order_status?r("div",{staticClass:"state-info bg-2"},[t._m(0),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(247)}})]):t._e(),t._v(" "),20==t.order.order_status||21==t.order.order_status||23==t.order.order_status?r("div",{staticClass:"state-info bg-1"},[r("div",{staticClass:"left"},[r("div",{staticClass:"state"},[t._v("已取消")]),t._v(" "),20==t.order.order_status?r("div",{staticClass:"msg"},[t._v("买家已取消")]):t._e(),t._v(" "),21==t.order.order_status?r("div",{staticClass:"msg"},[t._v("卖家已取消")]):t._e(),t._v(" "),23==t.order.order_status?r("div",{staticClass:"msg"},[t._v("超时未支付订单取消")]):t._e()]),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(309)}})]):t._e(),t._v(" "),30==t.order.order_status?r("div",{staticClass:"state-info bg-2"},[t._m(1),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(247)}})]):t._e(),t._v(" "),40==t.order.order_status?r("div",{staticClass:"state-info bg-2"},[t._m(2),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(247)}})]):t._e(),t._v(" "),50==t.order.order_status?r("div",{staticClass:"state-info bg-1"},[t._m(3),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(310)}})]):t._e(),t._v(" "),90==t.order.order_status?r("div",{staticClass:"state-info bg-1"},[t._m(4),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(310)}})]):t._e(),t._v(" "),80==t.order.order_status?r("div",{staticClass:"state-info bg-1"},[t._m(5),t._v(" "),r("img",{staticClass:"state-icon",attrs:{src:e(309)}})]):t._e(),t._v(" "),r("div",{staticClass:"order-info"},[r("div",{staticClass:"main border-top",on:{click:function(s){t.clickOrderItem(t.order)}}},[r("img",{staticClass:"img",attrs:{src:t.order.order_item_list[0].item_image}}),t._v(" "),r("div",{staticClass:"right"},[r("div",{staticClass:"r1"},[r("span",{staticClass:"title"},[t._v(t._s(t.order.order_item_list[0].item_name))]),t._v(" "),r("span",{staticClass:"num"},[t._v("x"+t._s(t.order.order_item_list[0].number))])]),t._v(" "),r("div",{staticClass:"r2"},[r("span",{staticClass:"prop"},[t._v(t._s(t.order.order_item_list[0].item_sku_name))]),t._v(" "),r("span",{staticClass:"price"},[t._v("¥"+t._s(t._f("filterPrice")(t.order.order_item_list[0].price)))])])])]),t._v(" "),t.order.refund_mark>0&&t.order.refund_mark<15||(0===t.order.refund_mark||13===t.order.refund_mark||9===t.order.refund_mark)&&t.order.order_status>=30&&t.order.order_status<=70&&1!==t.order.pay_type?r("div",{staticClass:"bottom"},[t.order.refund_mark>0&&t.order.order_item_list[0].refund_mark<8?r("div",{staticClass:"order-status"},[t._v("维权中")]):t._e(),t._v(" "),(0===t.order.refund_mark||13===t.order.refund_mark||9===t.order.refund_mark)&&t.order.order_status>=30&&t.order.order_status<=70&&2!=t.order.service_flag?r("div",{staticClass:"btn",on:{click:function(s){t.clickRefund()}}},[t._v("申请售后")]):t._e(),t._v(" "),t.order.refund_mark>0&&t.order.refund_mark<8?r("div",{staticClass:"btn",on:{click:function(s){t.clickCancelRefund()}}},[t._v("取消售后")]):t._e(),t._v(" "),t.order.refund_mark?r("div",{staticClass:"btn",on:{click:function(s){t.clickCheckRefund()}}},[t._v("查看售后")]):t._e()]):t._e()]),t._v(" "),r("div",{staticClass:"consignee"},[r("div",{staticClass:"main border-bottom"},[r("img",{staticClass:"icon",attrs:{src:e(327)}}),t._v(" "),r("div",{staticClass:"right"},[r("div",{staticClass:"user-info"},[r("span",{staticClass:"name"},[t._v(t._s(t.order.order_consignee.consignee))]),t._v(" "),r("span",{staticClass:"mobile"},[t._v(t._s(t.order.order_consignee.mobile))])]),t._v(" "),t.order.order_consignee?r("div",{staticClass:"address-info"},[r("div",{staticClass:"address"},[t._v("\n              "+t._s(t.order.order_consignee.province)+t._s(t.order.order_consignee.city)+t._s(t.order.order_consignee.area)+t._s(t.order.order_consignee.address)+"\n            ")])]):t._e()])]),t._v(" "),r("div",{staticClass:"bottom"},[t._v("\n        备注：\n        "),r("span",[t._v(t._s(t.order.buyer_remark?t.order.buyer_remark:"无"))])])]),t._v(" "),r("div",{staticClass:"list-ul"},[r("div",{staticClass:"list-li"},[t._v("订单编号：\n        "),r("span",[t._v(t._s(t.order.order_sn))])]),t._v(" "),t.order.order_time?r("div",{staticClass:"list-li"},[t._v("下单时间：\n        "),r("span",[t._v(t._s(t.order.order_time))])]):t._e(),t._v(" "),t.order.pay_time?r("div",{staticClass:"list-li"},[t._v("付款时间：\n        "),r("span",[t._v(t._s(t.order.pay_time))])]):t._e(),t._v(" "),t.order.consign_time?r("div",{staticClass:"list-li"},[t._v("发货时间：\n        "),r("span",[t._v(t._s(t.order.consign_time))])]):t._e(),t._v(" "),t.order.receipt_time?r("div",{staticClass:"list-li"},[t._v("收货时间：\n        "),r("span",[t._v(t._s(t.order.receipt_time))])]):t._e()]),t._v(" "),r("div",{staticClass:"payment-info"},[r("div",{staticClass:"row total-price border-bottom"},[r("span",[t._v("支付方式")]),t._v(" "),r("span",{staticClass:"price"},[t._v(t._s(t.payType[t.order.pay_type-1]))])]),t._v(" "),r("div",{staticClass:"row total-price border-bottom"},[r("span",[t._v("商品总额")]),t._v(" "),r("span",{staticClass:"price"},[t._v("￥"+t._s(t._f("filterPrice")(t.order.total_price)))])]),t._v(" "),r("div",{staticClass:"row fright-price border-bottom"},[r("span",[t._v("运费")]),t._v(" "),r("span",{staticClass:"price"},[t._v("￥"+t._s(t._f("filterPrice")(t.order.delivery_fee)))])]),t._v(" "),r("div",{staticClass:"row fright-price border-bottom"},[r("span",[t._v("优惠")]),t._v(" "),r("span",{staticClass:"price"},[t.order.discount_amount?r("span",[t._v("-￥"+t._s(t._f("filterPrice")(t.order.discount_amount)))]):r("span",[t._v("￥0")])])]),t._v(" "),r("div",{staticClass:"payment-price"},[t._v("\n        "+t._s(t.order.order_status>=30?"订单实付":"订单金额")+"：￥"+t._s(t._f("filterPrice")(t.order.total_amount))+"\n      ")])]),t._v(" "),r("div",{staticClass:"btm-group iphoneX"},[r("a",{staticClass:"btn--default",attrs:{href:"tel:"+t.order.seller_contact_mobile}},[t._v("联系卖家")]),t._v(" "),"10"==t.order.order_status?r("div",{staticClass:"btn--default",on:{click:function(s){t.clickCancelOrder(t.order.id)}}},[t._v("取消订单")]):t._e(),t._v(" "),"10"==t.order.order_status?r("div",{staticClass:"btn--primary",on:{click:function(s){t.clickOrderPay(t.order.id)}}},[t._v("立即支付")]):t._e(),t._v(" "),t.order.delivery_time?r("div",{staticClass:"btn--default",on:{click:function(s){t.clickLogistics(t.order)}}},[t._v("查看物流")]):t._e(),t._v(" "),"40"==t.order.order_status&&2!==t.order.refund_mark?r("div",{staticClass:"btn--primary",on:{click:function(s){t.clickReceipt(t.order)}}},[t._v("确认收货")]):t._e()])])]):t._e()},i=[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("待付款")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("30分钟内付款，超时订单将自动关闭")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("待发货")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("物流信息：等待卖家发货")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("待收货")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("等待买家确认收货")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("已收货")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("希望这次购物您能满意，您满意是我们的动力")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("已完成")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("交易已完成")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"state"},[this._v("已关闭")]),this._v(" "),s("div",{staticClass:"msg"},[this._v("交易已关闭")])])}];r._withStripped=!0,e.d(s,"a",function(){return r}),e.d(s,"b",function(){return i})}}]);